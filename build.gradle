/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.5.1/samples
 */
println "configuration phase"
println "gradle id: ${gradle.hashCode()}"
println "root: ${rootProject.hashCode()}, ${project.hashCode()}, ${gradle.rootProject.hashCode()}}"


task hello(description: "Hello task", group: "dmdev", type: DefaultTask){
    println "configuration phase. Task hello"
    println "task: $description, group: $group, actions: ${actions.size()}"

    doLast {
        println "execution phase, Action 1"
    }
    doFirst {
        println "execution phase, Action 2"
    }
}

task first {
    doLast{
        println "Task first"
    }
}

task second {
    doLast{
        println "Task second"
    }
}
task third {
    doLast{
        println "Task third"
    }
}
task fourth {

    doLast{
        println "Task fourth"
    }
}

//2 <--- 4

//fourth.dependsOn second
//second.dependsOn first
//second.finalizedBy third

fourth.dependsOn first
fourth.dependsOn second
fourth.dependsOn third

first.mustRunAfter second
//second.shouldRunAfter first

gradle.taskGraph.whenReady { TaskExecutionGraph graph ->
    println "---Graph: "
    graph.allTasks.each{
        println "${it.name}"
    }
}

//1
//2
//4